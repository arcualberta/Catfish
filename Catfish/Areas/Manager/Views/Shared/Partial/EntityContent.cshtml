@model Catfish.Areas.Manager.Models.ViewModels.EntityContentViewModel
@using PerpetuumSoft.Knockout
@using Catfish.Areas.Manager.Models.ViewModels

@{ 
    string title = string.IsNullOrEmpty(ViewData["title"] as string) ? "Children" : ViewData["title"] as string;

    var contextName = ViewBag.contanierId as string;
    if (string.IsNullOrEmpty(contextName))
    {
        contextName = "ctx_" + Guid.NewGuid().ToString("N");
    }

    var ko = Html.CreateKnockoutContext(contextName);
}

<div id="@contextName">
    @using (ko.Html.Form("Save", "EntityAssociation", null, new { id = contextName + "Form" }))
    {
        <div class="bs entity-content">
            <div class="box">
                <div class="title">
                    @title
                    <div class="bs right">
                        <span @ko.Bind.Visible(m => m.Status == KoBaseViewModel.eStatus.Success) style="display: none;" class="alert alert-success">Success!</span>
                        <span @ko.Bind.Visible(m => m.Status == KoBaseViewModel.eStatus.Error) style="display: none;" class="alert alert-danger">Error!</span>
                        @ko.Html.Button("Save", "Save", "EntityAssociation")
                    </div>
                </div>

                <div class="col-md-5">
                    <h4>Children</h4>
                    <div>@ko.Html.ListBox(m => m.ChildEntityList, new { }, e => e.Label).SelectedOptions(m => m.SelectedChildEntities)</div>
                </div>
                <div class="col-md-2 transfer-btn-panel">

                    <div>@ko.Html.Button("", "AddChildren", "EntityAssociation", new { }, new { @class = "glyphicon glyphicon-arrow-left" }).Enable(m => m.SelectedMasterEntities.Count > 0)</div>
                    <div>@ko.Html.Button("", "RemoveChildren", "EntityAssociation", new { }, new { @class = "glyphicon glyphicon-arrow-right" }).Enable(m => m.SelectedChildEntities.Count > 0)</div>
                    @*glyphicon glyphicon-arrow-left*@

                </div>
                <div class="col-md-5">
                    <h4>Master List</h4>
                    <div>@ko.Html.ListBox(m => m.MasterEntityList, new { }, e => e.Label).SelectedOptions(m => m.SelectedMasterEntities)</div>
                </div>
            </div>
        </div>
    }
</div>
@ko.Apply(Model, contextName)
