@model Catfish.Models.Blocks.ContactFormBlock
@{
    ViewBag.Title = "Contact Form";
   
    string recipient = Model.SendTo;
    string subject = Model.Subject;
   
}
   
   
    <div class="contactForm">
        <form method="post">
            <table class="cf-email">
                <tr></tr>
                <tr><td>Name: <span class="mandatory">*</span></td><td><input type="text" name="cf-name" class="form-control" required /></td></tr>
                <tr><td>Email: <span class="mandatory">*</span></td><td> <input type="email" name="cf-email" class="form-control" required /></td></tr>
                <tr><td>Message:<span class="mandatory">*</span> </td><td><textarea name="cf-body" cols="50" rows="5" class="form-control" required></textarea></td></tr>
                <tr><td> <span class="mandatory">*mandatory</span></td><td style="text-align:right;" > <input type="submit" value="Send Email" name="cf-sendBtn" class="btn btn-primary" /></td></tr>
            </table>
          
        </form>
    </div>
    <script>
    $("input[name='cf-sendBtn']").click(function() {
        var cfName = $("input[name='cf-name']").val();
        var email = $("input[name='cf-email']").val();
        if (!ValidateEmail(email)) {
            $("input[name='cf-email']").focus(function () {
                (this).blur();
            });
            return;
        }
        var body = $("textarea[name='cf-body']").val();

        var Email = { FromEmail: email, Body: body, UserName: cfName, Subject: '@subject', RecipientEmail: '@recipient' }

        var url = "../../Cms/SendEmail";
        $.ajax({
            type: "POST",
            url: url,
            data: { email: Email },
            success: function (e) {
                alert("Thank you for containg us.");
            },
            error: function (e) {
                alert("Error while sending email.");
            }
        });

    });
        function ValidateEmail(email) {
            var regex = /^([a-zA-Z0-9_.+-])+\@@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
            return regex.test(email);
        }
  
    </script>
<style>
    .mandatory{
        font-weight:bold;
        color: red;
        padding-right:5px;
        margin-right:5px;
    }
</style>