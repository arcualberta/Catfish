@model Catfish.Models.Blocks.ListDisplayBlock
@using Newtonsoft.Json;

@{
    var jsonData = JsonConvert.SerializeObject(Model);
}

<vue-list-display-block v-bind:model='@Html.Raw(jsonData)' inline-template>
    <div class="container list-display-block-container row">
        @{
            switch (Model.ItemListPosition.Value)
            {
                case Catfish.Models.Blocks.ItemPanelDirection.Left:
                    <div class="items-column col-md-4">

                        <h3 v-if="model.DisplayListTitle.Value != null" class="items-top-title">{{model.DisplayListTitle.Value}}</h3>

                        <div class="itemlist-scroller-container">
                            <div v-for="(item, index) of items" class="single-list-item" v-on:click="selectItem(index)">
                                <div v-if="selectedItemIndex == index" class="selected-indicator" :style="[model.SelectedColor.Value ? {'background-color': model.SelectedColor.Value} : {'background-color':'lightgreen'}]"></div>
                                <div v-if="item.Body.HasValue" :style="{'background': 'url(' + item.Body.Media.PublicUrl.substring(2) + ')'}" class="item-list-image" ></div>
                                <div class="item-list-text-container" :class="{ 'no-image-extra-padding' : !item.Body.HasValue}">
                                    <h4 v-if="item.ItemTitle.Value != null">{{item.ItemTitle.Value}}</h4>
                                    <h6 v-if="item.ItemSubtitle.Value != null">{{item.ItemSubtitle.Value}}</h6>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="display-column col-md-8 d-none d-md-block">
                        <div v-if="selectedItem == null">
                            <h2 class="list-display-content-space">Please select an item</h2>
                        </div>
                        <div v-else class="list-display-content-space" v-html="selectedItem.ItemContents.Value">
                        </div>
                    </div>
                    <transition name="refresh">
                        <div v-if="selectedItem" class="mobile-display-column d-sm-block d-md-none">
                            <button v-on:click="closeSelectedItemMobile()" type="button" class="btn btn-dark mobile-list-display-button"><i class="fa fa-times" aria-hidden="true"></i></button>

                            <div class="list-display-content-space" v-html="selectedItem.ItemContents.Value">
                            </div>
                        </div>
                    </transition>
                    break;
                case Catfish.Models.Blocks.ItemPanelDirection.Right:
                    <div class="display-column col-md-8 d-none d-md-block">
                        <div v-if="selectedItem == null">
                            <h2 class="list-display-content-space">Please select an item</h2>
                        </div>
                        <div class="list-display-content-space" v-else v-html="selectedItem.ItemContents.Value">
                        </div>
                    </div>

                    <div class="items-column col-md-4">

                        <h3 v-if="model.DisplayListTitle.Value != null" class="items-top-title">{{model.DisplayListTitle.Value}}</h3>

                        <div class="itemlist-scroller-container">
                            <div v-for="(item, index) of items" class="single-list-item" v-on:click="selectItem(index)">
                                <div v-if="selectedItemIndex == index" class="selected-indicator" :style="[model.SelectedColor.Value ? {'background-color': model.SelectedColor.Value} : {'background-color':'lightgreen'}]"></div>
                                <div v-if="item.Body.HasValue" :style="{'background': 'url(' + item.Body.Media.PublicUrl.substring(2) + ')'}" class="item-list-image"></div>
                                <div class="item-list-text-container" :class="{ 'no-image-extra-padding' : !item.Body.HasValue}">
                                    <h4 v-if="item.ItemTitle.Value != null">{{item.ItemTitle.Value}}</h4>
                                    <h6 v-if="item.ItemSubtitle.Value != null">{{item.ItemSubtitle.Value}}</h6>
                                </div>
                            </div>
                        </div>
                    </div>
                    <transition name="refresh">
                        <div v-if="selectedItem" class="mobile-display-column d-sm-block d-md-none">
                            <button v-on:click="closeSelectedItemMobile()" type="button" class="btn btn-dark mobile-list-display-button"><i class="fa fa-times" aria-hidden="true"></i></button>

                            <div class="list-display-content-space" v-html="selectedItem.ItemContents.Value">
                            </div>
                        </div>
                    </transition>

                    break;
                default:
                    break;
            }
        }
    </div>
</vue-list-display-block>
