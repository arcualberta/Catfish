@* Form Builder Vue App Template *@
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous" />
<link href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" , rel="stylesheet" />
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.js"></script>

<script src="~/Vue/_vendor/vue3.js"></script>
<script src="~/Vue/_vendor/vuex4.js"></script>

<div id="v3app" class="container row ml-3 v3app">
    @*Category Filter*@
    <div class="filter bg-light">
        <div class="row">
            <div v-for="(template, index) in fieldTemplates" class="col-sm-2">
                <div class="m-1">
                    <div class="card bdr-info-h">
                        <div class="card-body bg-light" @@click="insertField(index)">
                            <span :class="template.icon"></span> {{template.templateButtonLabel}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    @*Form*@
    <div class="">
        <h2>Form</h2>
        <button @@click="saveForm()">Save</button>
        <div class="card border-0">
            <div class="card-body">
                <div class="form-group">
                    <label>Form Title</label>
                    <input :value="formName" @@change="setFormProperty('name', $event.target.value)" type="text" class="form-control" placeholder="Enter form title" />
                </div>
                <div class="form-group">
                    <label>Form Description</label>
                    <textarea :value="formDescription" @@change="setFormProperty('description', $event.target.value)" type="text" class="form-control" placeholder="Enter form description here."></textarea>
                </div>
                <div class="form-group">
                    <label>Link Text</label>
                    <input :value="linkText" @@change="setFormProperty('linkText', $event.target.value)" type="text" class="form-control" placeholder="Enter link text" />
                </div>
            </div>
        </div>
        <h3>Fields</h3>
        <div v-for="(field, index) in fields">
            <field :index="index"></field>
        </div>
    </div>
</div>



@*
    IMPORTANT
    =========
    The following things need to happen in this order:
    1. Import the store and the app model
    2. Create the app
    3. Import all components
    4. Mount the app.
*@
<!-- Import the App model -->
<script src="~/Vue/FormBuilder/store.js"></script>
<script src="~/Vue/FormBuilder/appModel.js"></script>
<script src="~/Vue/FormBuilder/fieldModel.js"></script>

<!-- Create the App -->
<script>
    const appTemplate = Vue.createApp(appModel, { id: '@ViewData["id"]' });
    appTemplate.use(store);
    appTemplate.component('field', fieldModel);

    const app = appTemplate.mount('#v3app');

</script>

<!-- Import Components -->
<partial name="Partial/VueApps/Templates/Field" />

@*Container for modal*@
<div id="modalContainer"></div>
