@model Catfish.Core.Models.Contents.Fields.DateField

@Html.HiddenFor(model => model.ModelType)
@Html.HiddenFor(model => model.Id)

@if (Model.Exclude)
    return;

@for (int i = 0; i < Model.Values.Count; ++i)
{
    @Html.HiddenFor(model => model.Values[i].Id)

    var name = Html.NameFor(model => model.Values[i].DateValue);
    var id = Html.IdFor(model => model.Values[i].DateValue);
    var required = Model.Required ? "required" : "";
    var fieldType = Model.IncludeTime ? "datetime-local" : "date";
    string[] dt = Model.Values[i].Value.Split(" ");
    string strdate = "";
    if(dt.Length > 1)
        strdate = DateTime.ParseExact(dt[0], "dd/MM/yyyy", System.Globalization.CultureInfo.InvariantCulture).ToString("yyyy-MM-dd");

    strdate = string.IsNullOrEmpty(strdate) ? Model.Values[i].Value : strdate;

    <input type="@fieldType"
           id="@id"
           name="@name"
           value="@strdate"
           onchange="@ViewData["onchange"]"
           @required
           data-value-expression="@ViewData["data-value-expression"]"
           data-required-if="@ViewData["data-required-if"]"
           data-visible-if="@ViewData["data-visible-if"]"
           data-field-id="@ViewData["data-field-id"]">
}